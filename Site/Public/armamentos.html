<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ironheart | Armamentos</title>
    <link rel="stylesheet" href="armamentos.css">
    <link rel="icon" href="logo/Ironheart (logo).png" </head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://kit.fontawesome.com/3f0399636b.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="http://www.chartjs.org/dist/2.7.1/Chart.js"></script>
    <script src="http://www.chartjs.org/samples/latest/utils.js"></script>

<body>

    <header>

        <nav class="nav-container" id="nav">

            <img class="logo" src="logo/Ironheart (white logo without ribbon at the side of the shield).png">
            <ul class="nav-list">

                <li>
                    <a href="index.html">Home
                        <div class="barra"></div>
                    </a>
                </li>

                <li>
                    <a href="curiosidades.html">Curiosidades
                        <div class="barra"></div>
                    </a>
                </li>

                <li>
                    <a href="cavaleirosrenomados.html">Cavaleiros Renomados
                        <div class="barra"></div>
                    </a>
                </li>

                <li>
                    <a href="armaduras.html">Armaduras
                        <div class="barra"></div>
                    </a>
                </li>

                <li>
                    <a href="armamentos.html">Armamentos
                        <div class="barra"></div>
                    </a>
                </li>

                <li>
                    <span style="color: white;">|</span>
                </li>

                <li>
                    <a href="login.html">Login
                        <div class="barra"></div>
                    </a>
                </li>


                <li>
                    <a href="cadastro.html">Cadastro
                        <div class="barra"></div>
                    </a>
                </li>
            </ul>

        </nav>

    </header>

    <main id="armamentos">

        <div class="container">

            <div class="content">

                <p id="paragraphTitle">ARMAMENTOS</p>

                <p id="paragraph">

                    As armas medievais abrangem uma ampla variedade de armas utilizadas durante a idade média, que
                    ocorreu aproximadamente entre os séculos XI e XVI. Essas armas eram usadas em combates, duelos e torneios, tanto
                    por guerreiros a pé quanto por cavaleiros montados. Aqui estão algumas das armas medievais mais
                    conhecidas:
                </p>

                <div id="espadaCurta">

                    <p id="paragraph">
                        <span id="destaque">Espada Curta:</span> <br> <br>
                        A Espada Curta era uma arma de
                        lâmina reta e cabo projetada para ser usada com uma só mão durante a idade média. Ela era uma
                        alternativa mais versátil e ágil à Espada Longa de duas mãos.

                        A Espada Curta possuía uma lâmina mais curta em comparação com a Espada Longa, geralmente
                        medindo entre 60 e 90 centímetros. Isso permitia que fosse manejada de forma mais rápida e
                        precisa em espaços confinados, como em combates em ambientes fechados ou em formações apertadas.

                        Seu cabo era projetado para acomodar uma mão, mas muitas vezes também tinha espaço suficiente
                        para uma segunda mão, permitindo um melhor controle e força adicional nos golpes. Isso dava ao
                        portador da espada curta a flexibilidade de usar a mão livre para empunhar um escudo, um segundo
                        armamento ou até mesmo lutar desarmado em certas situações.

                        A Espada Curta era uma arma popular entre guerreiros de diversas origens, como cavaleiros,
                        soldados de infantaria e espadachins. Sua versatilidade permitia uma variedade de técnicas de
                        combate, incluindo golpes cortantes, estocadas e bloqueios. Era eficaz tanto em ataques rápidos
                        e ofensivos quanto em defesa contra ataques inimigos. <br>
                    </p>

                    <div class="imgArma">
                        <img class="arma1" src="img-weapon/armingsword1.jpg">
                        <img class="arma1" src="img-weapon/armingsword2.jpg">
                        <img class="arma1" src="img-weapon/armingsword3.jpg">
                    </div>

                </div>

                <div id="espadaLonga">

                    <p id="paragraph">
                        <span id="destaque">Espada Longa:</span> <br> <br>
                        As Espadas Longas medievais foram armas icônicas usadas durante a idade média, particularmente
                        nos séculos XIII a XVI. Essas armas
                        eram notáveis por sua lâmina longa e reta, geralmente medindo entre 90 e 120 centímetros, e pelo
                        seu cabo que permitia ser empunhada com ambas as mãos.<br>

                        Essas espadas eram habilmente forjadas e projetadas para serem equilibradas e versáteis. Sua
                        lâmina afiada podia ser usada para golpear, cortar e perfurar, tornando-a eficaz em explorar os
                        pontos fracos das armaduras. Sua estrutura robusta permitia
                        resistir a impactos e bloquear ataques.<br>

                        A empunhadura da espada longa era projetada para proporcionar maior controle e permitir o uso de
                        técnicas de esgrima mais avançadas. Os cavaleiros medievais, em particular, usavam essas espadas
                        para combater tanto a pé quanto montados a cavalo, sendo uma arma de escolha em duelos, batalhas
                        e torneios. <br>
                    </p>

                    <div class="imgArma">
                        <img class="arma2" src="img-weapon/longsword1.jpg">
                        <img class="arma2" src="img-weapon/longsword2.jpg">
                        <img class="arma2" src="img-weapon/longsword3.jpg">
                    </div>

                </div>

                <div id="espadaGrande">

                    <p id="paragraph">
                        <span id="destaque">Espada Grande:</span> <br> <br>
                        A Espada Grande é uma arma medieval que se destaca por seu tamanho e alcance. É uma espada de
                        duas mãos projetada para ser empunhada por um único guerreiro, usando as duas mãos no cabo
                        alongado. Ela possui uma lâmina longa, geralmente medindo entre 100 e 150 centímetros, embora
                        possa variar de acordo com o estilo e a região. <br>

                        A Espada Grande é conhecida por sua versatilidade e poder de corte. Sua lâmina larga e afiada
                        permite golpes devastadores, capazes de amassar a armadura e contundir o oponente que a vestia.
                        <br>

                        Devido ao seu tamanho e peso, a Espada Grande exigia força e habilidade consideráveis para ser
                        manejada com eficiência. Os guerreiros que a empunhavam precisavam de treinamento especializado
                        para usar sua longa lâmina com precisão, controlando o equilíbrio e realizando movimentos
                        fluidos. <br>

                        A Espada Grande foi amplamente usada por cavaleiros, mercenários e soldados de infantaria
                        durante a Idade Média. Ela era eficaz tanto contra inimigos protegidos por armaduras quanto em
                        situações de combate corpo a corpo. <br>
                    </p>

                    <div class="imgArma">
                        <img class="arma3" src="img-weapon/greatsword1.jpg">
                        <img class="arma3" src="img-weapon/greatsword2.jpg">
                        <img class="arma3" src="img-weapon/greatsword3.jpg">
                    </div>

                </div>

                <div id="machado">

                    <p id="paragraph">
                        <span id="destaque">Machado:</span> <br> <br>
                        O Machado possuía uma lâmina larga e afiada, geralmente feita de aço, que
                        podia variar em forma e tamanho. A lâmina era montada em um cabo de madeira resistente, que
                        permitia ao guerreiro manejá-lo com uma ou duas mãos, dependendo do modelo específico. <br>

                        Uma característica distintiva do Machado era sua cabeça com um formato assimétrico.
                        Geralmente, a parte frontal da cabeça apresentava uma lâmina afiada para cortar e golpear,
                        enquanto o lado oposto possuía um ponto de impacto, como um martelo ou uma ponta afiada,
                        projetado para perfurar e penetrar armaduras. <br>

                        Essa combinação de lâmina cortante e elemento de impacto tornava o Machado uma arma
                        versátil e eficaz em diferentes situações de combate. Ele podia ser usado para desferir golpes
                        poderosos, esmagar escudos, cortar membros ou mesmo desmontar cavaleiros montados. <br>
                    </p>

                    <div class="imgArma">
                        <img class="arma4" src="img-weapon/battleaxe1.jpg">
                        <img class="arma4" src="img-weapon/battleaxe2.jpg">
                        <img class="arma4" src="img-weapon/battleaxe3.jpg">
                    </div>

                </div>

                <div id="alabarda">

                    <p id="paragraph">
                        <span id="destaque">Alabarda:</span> <br> <br>
                        A Alabarda consistia em uma cabeça de machado montada na extremidade de uma haste longa,
                        geralmente de 1,5 a 2 metros de comprimento. A cabeça do machado tinha uma lâmina afiada em um
                        lado e, no lado oposto, uma ponta afiada ou um gancho. Essa combinação permitia uma variedade de
                        técnicas de ataque, incluindo golpes de corte, perfuração e desarmamento. <br>

                        A haste do machado fornecia um alcance adicional em relação às armas de combate corpo a
                        corpo convencionais, como espadas ou machados. Isso permitia que o portador da Alabarda
                        atacasse oponentes a uma distância mais segura, evitando o perigo imediato de
                        contra-ataques. <br>

                        Além disso, a cabeça da Alabarda geralmente incluía uma pequena lança na parte superior,
                        tornando-o ainda mais versátil. Essa lança permitia realizar estocadas e perfurar adversários,
                        sendo eficaz contra cavaleiros montados ou em situações em que era necessário um ataque mais
                        preciso. <br>

                        A Alabarda era frequentemente usado por soldados de infantaria, guardas ou tropas de
                        elite nas formações de combate medieval. Sua combinação de alcance, poder de corte e ponta aguda
                        o tornava uma arma temida e eficiente contra inimigos protegidos por armaduras. <br>
                    </p>

                    <div class="imgArma">
                        <img class="arma5" src="img-weapon/poleaxe1.jpg">
                        <img class="arma5" src="img-weapon/poleaxe2.jpg">
                        <img class="arma5" src="img-weapon/poleaxe3.jpg">
                    </div>

                </div>

                <div id="maçaMartelo">

                    <p id="paragraph">
                        <span id="destaque">Maça/Martelo:</span> <br> <br>
                        A Maça e o Martelo medieval são armas de combate corpo a corpo que se destacam por sua
                        capacidade de impacto e poder de esmagamento. Embora sejam diferentes em aparência, ambos são
                        armas
                        contundentes usadas durante a idade média. <br>

                        A Maça é uma arma caracterizada por uma cabeça pesada e maciça montada em um cabo. A
                        cabeça da Maça geralmente consiste em uma esfera com pontas
                        projetadas para maximizar o impacto e causar danos contundentes. Essas pontas poderiam ser
                        lisas, pontiagudas ou com cravos afiados, ou uma série de "lâminas" estreladas, dependendo da
                        preferência e do propósito do usuário. <br>

                        O Martelo, por sua vez, era uma arma de cabo curto com uma cabeça composta por uma
                        parte de impacto plana e uma ponta ou gume afiado na parte oposta. Essa combinação permitia ao
                        usuário desferir golpes poderosos de esmagamento ou, alternativamente, realizar estocadas e
                        perfurar adversários com a ponta ou o gume afiado. <br>

                        Tanto a Maça quanto o Martelo eram amplamente utilizados por cavaleiros e soldados de infantaria
                        durante a
                        idade média. Sua eficácia estava na capacidade de contornar as armaduras, causando lesões graves
                        mesmo aos oponentes mais bem protegidos. Essas armas eram especialmente úteis contra placas de
                        armaduras pesadas, pois podiam transferir a energia do impacto por uma área maior, aumentando as
                        chances de causar danos ou lesões internas. <br>
                    </p>

                    <div class="imgArma">
                        <img class="arma6" src="img-weapon/hammer1.jpg">
                        <img class="arma6" src="img-weapon/hammer2.jpg">
                        <img class="arma6" src="img-weapon/hammer3.jpg">
                    </div>

                </div>

                <div id="lanca">

                    <p id="paragraph">
                        <span id="destaque">Lança:</span> <br>
                        A Lança de justa medieval, também conhecida como Lança de torneio, era uma arma específica usada
                        em torneios e justas durante a idade média. Diferente das lanças de guerra usadas em combate, a
                        Lança de justa era projetada para ser mais segura e menos letal, permitindo duelos
                        cavalheirescos sem causar ferimentos graves. <br>

                        A Lança de justa era uma arma longa, geralmente medindo entre 2,5 e 3,5 metros de comprimento,
                        com uma ponta afiada e reforçada chamada "coroa" ou "rosa". Essa ponta era cônica e tinha
                        pequenas abas ou lâminas ao redor, projetadas para prevenir penetração excessiva na armadura e
                        evitar ferimentos graves. <br>

                        A Lança de justa era usada principalmente durante competições de torneios, onde cavaleiros se
                        enfrentavam em duelos montados, tentando derrubar uns aos outros do cavalo. As regras variavam,
                        mas geralmente os cavaleiros corriam em direção um ao outro em velocidade, empunhando suas
                        Lanças de justa, buscando acertar o adversário com precisão na área designada, como o peito ou o
                        escudo. <br>
                    </p>

                    <div class="imgArma">
                        <img class="arma7" src="img-weapon/lance1.png">
                        <img class="arma7" src="img-weapon/lance2.png">
                    </div>

                </div> <br>

                <div id="metricaArmas">

                    <p id="paragraphGraficos">
                        <span id="destaque">Preferência de armamento dos usuários:</span> <br> <br>
                    </p>

                    <div class="grafico">

                        <canvas id="armaBarra" </canvas>

                    </div>

                </div>

                <p id="paragraphSubtitle">Galeria: Armas Famosas</p> <br>

            </div>

        </div>

    </main>
</body>

</html>

<script>
    let proximaAtualizacao;

    window.onload = obterDadosGrafico(1);


    function obterDadosGrafico(idAquario) {

        if (proximaAtualizacao != undefined) {
            clearTimeout(proximaAtualizacao);
        }


        fetch(`/medidas/ultimas/${idAquario}`, { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {
                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                    plotarGrafico(resposta, idAquario);

                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });
    }

    // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico
    // Configura o gráfico (cores, tipo, etc), materializa-o na página e, 
    // A função *plotarGrafico* também invoca a função *atualizarGrafico*
    function plotarGrafico(resposta, idAquario) {
        console.log('iniciando plotagem do gráfico...');

        var dados = {
            labels: [],
            datasets: [
                {
                    label: '',
                    data: []
                },
                {
                    yAxisID: 'y-armasfavoritas',
                    label: 'Armas Favoritas',
                    backgroundColor: ['#d9b100', '#d9b100', '#d9b100', '#d9b100', '#d9b100', '#d9b100', '#d9b100'],
                    fill: true,
                    data: []
                }
            ]
        };


        for (i = 0; i < resposta.length; i++) {
            var registro = resposta[i];
            dados.labels.push(registro.Arma);
            dados.datasets[0].data.push(registro.Arma);
            dados.datasets[1].data.push(registro.Voto);
            console.log(registro.Voto)


        }

        console.log(JSON.stringify(dados));

        var ctx = armaBarra.getContext('2d');
        window.armaBarra = Chart.Bar(ctx, {
            data: dados,
            options: {
                responsive: true,
                animation: { duration: 900 },
                hoverMode: 'index',
                stacked: false,
                title: {
                    display: true,
                    text: 'As Armas Mais Escolhidas'
                },

                scales: {
                    yAxes: [{
                        type: 'linear',
                        display: true,
                        position: 'left',
                        id: 'y-armasfavoritas',
                        ticks: {
                            beginAtZero: true,
                            max: 15,
                            min: 0
                        }
                    }, {
                        display: false,
                    }],
                }
            }
        });


        // Esta função *atualizarGrafico* atualiza o gráfico que foi renderizado na página,
        // buscando a última medida inserida em tabela contendo as capturas, 

        //     Se quiser alterar a busca, ajuste as regras de negócio em src/controllers
        //     Para ajustar o "select", ajuste o comando sql em src/models
        function atualizarGrafico(idAquario, dados) {

            fetch(`/medidas/tempo-real/${idAquario}`, { cache: 'no-store' }).then(function (response) {
                if (response.ok) {
                    response.json().then(function (novoRegistro) {

                        console.log(`Dados recebidos Atualizar  Graficos: ${JSON.stringify(novoRegistro)}`);
                        console.log(dados);

                        for (i = 0; i < novoRegistro.length; i++) {
                            var registro = novoRegistro[i];
                            // tirando e colocando valores no gráfico
                            dados.labels.shift(); // apagar o primeiro
                            dados.labels.push(registro.Arma);// incluir um novo momento

                            dados.datasets[0].data.shift();  // apagar o primeiro de umidade
                            dados.datasets[0].data.push(registro.Arma); // incluir uma nova medida de umidade

                            dados.datasets[1].data.shift();
                            dados.datasets[1].data.push(registro.Voto);
                        }

                        window.myChart.update();

                        // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
                        proximaAtualizacao = setTimeout(() => atualizarGrafico(idAquario, dados), 2000);
                    });
                } else {
                    console.error('Nenhum dado encontrado ou erro na API');
                    // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
                    proximaAtualizacao = setTimeout(() => atualizarGrafico(idAquario, dados), 200000);
                }
            })
                .catch(function (error) {
                    console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
                });

        }

    }
</script>